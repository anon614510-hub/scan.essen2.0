<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FridgeForager - Tech Stack & Features</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 5px;
        }
        h3 {
            color: #27ae60;
            margin-top: 25px;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
        }
        code {
            background-color: #f0f0f0;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.9em;
            color: #d63384;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .box {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        strong {
            color: #444;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FridgeForager App: Tech Stack & Features</h1>

        <h2>1. Technical Architecture</h2>

        <h3>Core Framework</h3>
        <ul>
            <li><strong>Frontend Framework</strong>: Next.js 16 (App Router based)</li>
            <li><strong>Language</strong>: TypeScript</li>
            <li><strong>Styling Engine</strong>: Tailwind CSS 4 (Zero-runtime utility class styling)</li>
            <li><strong>Runtime Environment</strong>: Node.js</li>
        </ul>

        <h3>Authentication & Security</h3>
        <ul>
            <li><strong>Auth Provider</strong>: Clerk (<code>@clerk/nextjs</code>)</li>
            <li><strong>Implements</strong>: Secure Middleware, Protected Routes, User Sessions, and OAuth (Google/GitHub supported).</li>
        </ul>

        <h3>Database Layer</h3>
        <ul>
            <li><strong>Database</strong>: PostgreSQL (Relational Database)</li>
            <li><strong>ORM</strong>: Prisma 5.10.0 (Stable)</li>
            <li><strong>Data Models</strong>:
                <ul>
                    <li><code>User</code>: Synchronized with Clerk auth ID.</li>
                    <li><code>UserProfile</code>: Stores onboarding data (Allergies, Diet, Health Goals).</li>
                    <li><code>Ingredient</code>: Stores scanned food items.</li>
                    <li><code>Recipe</code>: Stores AI-generated recipes.</li>
                </ul>
            </li>
        </ul>

        <h2>2. Artificial Intelligence Integration</h2>
        <p>The app uses a <strong>Zero-Cost Multi-Model Architecture</strong> via OpenRouter API.</p>

        <h3>Vision AI (Ingredient Scanning)</h3>
        <ul>
            <li><strong>Primary Model</strong>: <code>qwen/qwen2.5-vl-72b-instruct:free</code></li>
            <li><strong>Fallback Models</strong>: <code>google/gemma-3-12b-it:free</code>, <code>nvidia/nemotron-nano-12b-v2-vl:free</code></li>
            <li><strong>Functionality</strong>:
                <ol>
                    <li>Captures camera frame as Base64.</li>
                    <li>Sends to AI with a prompt to "Identify all edible items".</li>
                    <li>Returns a JSON array with <code>name</code>, <code>quantity</code>, and <code>expiry_status</code>.</li>
                </ol>
            </li>
        </ul>

        <h3>Generative AI (Recipe Creation)</h3>
        <ul>
            <li><strong>Primary Model</strong>: <code>meta-llama/llama-3.3-70b-instruct:free</code></li>
            <li><strong>Fallback Models</strong>: <code>deepseek/deepseek-r1:free</code>, <code>mistralai/mistral-nemo:free</code></li>
            <li><strong>Functionality</strong>:
                <ol>
                    <li>Combines user's <strong>Health Profile</strong> (from DB) + <strong>Scanned Ingredients</strong>.</li>
                    <li>Generates a structured JSON recipe ensuring safety (allergen awareness) and nutritional optimization.</li>
                </ol>
            </li>
        </ul>

        <h2>3. Key Features</h2>

        <h3>üåç Application Internationalization (i18n)</h3>
        <ul>
            <li><strong>Library</strong>: <code>next-intl</code></li>
            <li><strong>Implementation</strong>: Middleware detects user locale (English <code>en</code> / Spanish <code>es</code>) and serves translated UI components.</li>
        </ul>

        <h3>üé• Localized YouTube Recommendations</h3>
        <p>This feature dynamically finds cooking videos in the user's preferred language.</p>
        <div class="box">
            <strong>How it works:</strong>
            <ol>
                <li><strong>Trigger</strong>: When a recipe is generated.</li>
                <li><strong>Logic</strong>: The backend constructs a specific search query.
                    <ul>
                        <li>Format: <code>"{Recipe Title} recipe in {Language}"</code></li>
                        <li><em>Example 1</em>: If user selects <strong>Gujarati</strong>, query = <code>"Dal Bati recipe in Gujarati"</code></li>
                        <li><em>Example 2</em>: If user selects <strong>Spanish</strong>, query = <code>"Paella recipe in Spanish"</code></li>
                    </ul>
                </li>
                <li><strong>API</strong>: Calls <strong>YouTube Data API v3</strong> with this localized query string.</li>
                <li><strong>Result</strong>: Displays video thumbnails that match the user's linguistic preference.</li>
            </ol>
        </div>

        <h3>üè† Robust Onboarding Flow</h3>
        <ul>
            <li><strong>One-Time Logic</strong>: System checks database for existing profile.</li>
            <li><strong>Back-Button Trap</strong>: Uses <code>history.pushState</code> to prevent users from accidentally navigating back to the onboarding screen after completion.</li>
            <li><strong>Session Persistence</strong>: Uses a module-level fallback. If the database connection is unstable, the app remembers the "Completed" status in-memory for the session to prevent navigation loops.</li>
        </ul>

        <h3>üìä Health Dashboard</h3>
        <ul>
            <li>Visualizes "Health Score" (1-10 based on ingredients).</li>
            <li>Tracks "Waste Saved" percentage.</li>
            <li>Displays history of cooked recipes.</li>
        </ul>

        <h3>üì± Progressive Web App (PWA)</h3>
        <ul>
            <li>Uses <code>@ducanh2912/next-pwa</code>.</li>
            <li>Generating manifest and service workers to allow "Add to Home Screen" functionality on mobile devices.</li>
        </ul>

        <h2>4. Dependencies List (Summary)</h2>
        <ul>
            <li><code>next</code>, <code>react</code>, <code>react-dom</code>: Core UI.</li>
            <li><code>@clerk/nextjs</code>: Auth.</li>
            <li><code>@prisma/client</code>: Database access.</li>
            <li><code>openai</code> (used for OpenRouter compatibility): AI client.</li>
            <li><code>framer-motion</code>: Animations.</li>
            <li><code>lucide-react</code>: Icons.</li>
            <li><code>next-intl</code>: Translations.</li>
        </ul>
    </div>
</body>
</html>
